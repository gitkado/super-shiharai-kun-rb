# Specs ドキュメント運用ガイド

Claude Codeのサブエージェント（architect / implementer）が検討内容をリポジトリに残すためのディレクトリ構成と記述ルールをまとめます。

## ディレクトリ構造

```
specs/<feature_slug>/
  ├─ requirements.md  # 要件定義・背景・非機能要件など
  ├─ design.md        # 設計判断・パッケージ構造・API方針
  └─ tasks.md         # 実装タスク・テスト計画・進捗ログ
```

- `<feature_slug>` は対象機能を表すケバブケース（例: `invoice-approval-flow`）。
- 既存ディレクトリがあれば追記し、新規機能はディレクトリを作成してから記述します。

## requirements.md

1. 背景 / 目的
2. 現状の課題
3. スコープ / 非スコープ
4. ビジネス / ユーザーフロー
5. 非機能要件（性能、監査、可観測性など）
6. ステークホルダーと責務
7. 計測指標・成功条件

必要に応じてチェックリストを使い、検討済みかを明示してください。

## design.md

1. 重要な設計判断と理由
2. Packwerkパッケージ構造案と公開API
3. エンティティ / DTO / イベントの定義
4. データフロー・シーケンス（Mermaid記法可）
5. テスト戦略（観点、境界、テストダブル方針など）
6. リスク・未解決事項・代替案

要件差異が発生した場合は requirements.md も合わせて更新します。

## tasks.md

1. 実装タスク（チェックリスト形式を推奨）
2. 品質チェックや検証コマンド
3. 完了報告・検証結果・残課題

Architectサブエージェントが初期TODO・テスト観点・検証コマンドをドラフトし、Implementerサブエージェントが進捗更新・追記を行います。
